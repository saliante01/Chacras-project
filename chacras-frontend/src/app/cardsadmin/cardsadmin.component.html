<div class="cards-container">
  <!-- â³ Cargando -->
  <div *ngIf="cargando" class="loading">Cargando chacras...</div>

  <!-- âš ï¸ Error -->
  <div *ngIf="!cargando && errorMessage" class="error">
    {{ errorMessage }}
  </div>

  <!-- ğŸ“­ Sin resultados -->
  <div *ngIf="!cargando && chacras.length === 0 && !errorMessage" class="no-results">
    No hay chacras registradas en el sistema.
  </div>

  <!-- ğŸŸ© Tarjetas -->
  <div class="admin-card" *ngFor="let chacra of chacras" (click)="abrirPop(chacra)">
    <div class="image-wrapper">
      <img [src]="chacra.imagenUrl" [alt]="chacra.nombre" />
    </div>

    <div class="card-content">
      <h3>{{ chacra.nombre }}</h3>
      <p class="location">ğŸ“ {{ chacra.ubicacion }}</p>
      <p class="email">ğŸ‘¤ {{ chacra.usuarioEmail }}</p>
    </div>
  </div>
</div>

<!-- ğŸ’¬ Pop-up principal -->
<div class="popup-overlay" *ngIf="chacraSeleccionada && !mostrarConfirmacion" (click)="cerrarPop($event)">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="cerrarPop($event)">Ã—</button>

    <img
      [src]="chacraSeleccionada.imagenUrl"
      [alt]="chacraSeleccionada.nombre"
      class="popup-image"
    />

    <h3>{{ chacraSeleccionada.nombre }}</h3>
    <p class="popup-location">ğŸ“ {{ chacraSeleccionada.ubicacion }}</p>
    <p class="popup-owner">ğŸ‘¤ DueÃ±o: {{ chacraSeleccionada.usuarioEmail }}</p>

    <div class="popup-actions">
      <button class="update-btn" (click)="irAActualizar(chacraSeleccionada)">Actualizar</button>
      <button class="delete-btn" (click)="abrirConfirmacion()">Borrar</button>
    </div>
  </div>
</div>

<!-- âš ï¸ Pop-up de confirmaciÃ³n -->
<div class="popup-overlay" *ngIf="mostrarConfirmacion" (click)="cerrarConfirmacion($event)">
  <div class="popup-content small" (click)="$event.stopPropagation()">
    <p>Â¿EstÃ¡s seguro de que deseas eliminar esta chacra?</p>
    <div class="popup-actions">
      <button class="confirm-btn" (click)="confirmarBorrado()">SÃ­</button>
      <button class="cancel-btn" (click)="cerrarConfirmacion($event)">No</button>
    </div>
  </div>
</div>
