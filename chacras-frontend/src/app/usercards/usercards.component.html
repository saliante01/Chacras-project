<div class="cards-container">
  <!-- ⏳ Cargando -->
  <div *ngIf="cargando" class="loading">Cargando chacras...</div>

  <!-- ⚠️ Error -->
  <div *ngIf="!cargando && errorMessage" class="error">{{ errorMessage }}</div>

  <!-- 📭 Sin resultados -->
  <div *ngIf="!cargando && chacras.length === 0 && !errorMessage" class="no-results">
    No hay chacras asociadas a tu usuario.
  </div>

  <!-- 🟩 Tarjetas -->
  <div class="user-card" *ngFor="let chacra of chacras" (click)="abrirPop(chacra)">
    <div class="image-wrapper">
      <img [src]="getImageUrl(chacra.imagenUrl)" [alt]="chacra.nombre" />
    </div>

    <div class="card-content">
      <h3>{{ chacra.nombre }}</h3>
      <p class="location">📍 {{ chacra.ubicacion }}</p>
      <p class="email">👤 {{ chacra.usuarioEmail }}</p>
    </div>
  </div>
</div>

<!-- 💬 Pop-up principal -->
<div class="popup-overlay" *ngIf="mostrarConfirmacion === false && usuarioSeleccionado">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="cerrarPop($event)">×</button>

    <img [src]="getImageUrl(usuarioSeleccionado.imagenUrl)"
         [alt]="usuarioSeleccionado.nombre"
         class="popup-image" />

    <h3>{{ usuarioSeleccionado.nombre }}</h3>
    <p class="popup-location">📍 {{ usuarioSeleccionado.ubicacion }}</p>
    <p class="popup-owner">👤 Dueño: {{ usuarioSeleccionado.usuarioEmail }}</p>

    <div class="popup-actions">
      <button class="update-btn" (click)="irAActualizar(usuarioSeleccionado)">Actualizar</button>
      <button class="delete-btn" (click)="abrirConfirmacion()">Borrar</button>
    </div>
  </div>
</div>

<!-- ⚠️ Pop-up de confirmación -->
<div class="popup-overlay" *ngIf="mostrarConfirmacion">
  <div class="popup-content small" (click)="$event.stopPropagation()">
    <p>¿Estás seguro de que deseas eliminar esta chacra?</p>
    <div class="popup-actions">
      <button class="confirm-btn" (click)="confirmarBorrado()">Sí</button>
      <button class="cancel-btn" (click)="cerrarConfirmacion($event)">No</button>
    </div>
  </div>
</div>
