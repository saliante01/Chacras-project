<div class="cards-container">
  <!-- â³ Cargando -->
  <div *ngIf="cargando" class="loading">Cargando chacras...</div>

  <!-- âš ï¸ Error -->
  <div *ngIf="!cargando && errorMessage" class="error">{{ errorMessage }}</div>

  <!-- ğŸ“­ Sin resultados -->
  <div *ngIf="!cargando && chacras.length === 0 && !errorMessage" class="no-results">
    No hay chacras asociadas a tu usuario.
  </div>

  <!-- ğŸŸ© Tarjetas -->
  <div class="user-card" *ngFor="let chacra of chacras" (click)="abrirPop(chacra)">
    <div class="image-wrapper">
      <img [src]="getImageUrl(chacra.imagenUrl)" [alt]="chacra.nombre" />
    </div>

    <div class="card-content">
      <h3>{{ chacra.nombre }}</h3>
      <p class="location">ğŸ“ {{ chacra.ubicacion }}</p>
      <p class="email">ğŸ‘¤ {{ chacra.usuarioEmail }}</p>
    </div>
  </div>
</div>

<!-- ğŸ’¬ Pop-up principal -->
<div class="popup-overlay" *ngIf="mostrarConfirmacion === false && usuarioSeleccionado">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="cerrarPop($event)">Ã—</button>

    <img [src]="getImageUrl(usuarioSeleccionado.imagenUrl)"
         [alt]="usuarioSeleccionado.nombre"
         class="popup-image" />

    <h3>{{ usuarioSeleccionado.nombre }}</h3>
    <p class="popup-location">ğŸ“ {{ usuarioSeleccionado.ubicacion }}</p>
    <p class="popup-owner">ğŸ‘¤ DueÃ±o: {{ usuarioSeleccionado.usuarioEmail }}</p>

    <div class="popup-actions">
      <button class="update-btn" (click)="irAActualizar(usuarioSeleccionado)">Actualizar</button>
      <button class="delete-btn" (click)="abrirConfirmacion()">Borrar</button>
    </div>
  </div>
</div>

<!-- âš ï¸ Pop-up de confirmaciÃ³n -->
<div class="popup-overlay" *ngIf="mostrarConfirmacion">
  <div class="popup-content small" (click)="$event.stopPropagation()">
    <p>Â¿EstÃ¡s seguro de que deseas eliminar esta chacra?</p>
    <div class="popup-actions">
      <button class="confirm-btn" (click)="confirmarBorrado()">SÃ­</button>
      <button class="cancel-btn" (click)="cerrarConfirmacion($event)">No</button>
    </div>
  </div>
</div>
